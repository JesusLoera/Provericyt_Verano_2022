# AuPd nanoparticle, compressing
#1 general
#angstrom, eV, Kelvin, etc
units		metal
#sistema 3D
dimension	3
#las particulas son atomos
atom_style      atomic
#skin para lista de vecinos
neighbor        0.3 bin

#2 estructura
#condiciones periodicas de frontera
boundary	f f f 
#archivo de coordenadas iniciales
read_data	gaussian.dat
#masa de Au
mass        1 196.967
#masa de Pd
mass		2 106.42

#3 variables
# Variables que controlan extension de simulacion
#Time step
variable tstep equal 0.001
#numero de pasos para la rampa de temperatura
variable nramp equal 2000                # intenta 20000
#numero de pasos para equilibracion
variable nequil equal 1000               # intenta 10000
#numero de pasos para colectar estadistica
variable nstat equal 1000                # intenta 10000
#reporta informacion termodinamica 20 veces
variable ntherm equal v_nequil/20
#escribe en archivo dump 20 veces
variable ndump equal v_nstat/20
#numero de atomos
variable natoms equal "count(all)"
#temperatura muy baja para optimizar sistema
variable temp0 equal 1.0
#temperatura mas baja
variable temp1 equal 400
#temperatura mas alta
variable temp2 equal 1500
#numero de veces que se incrementara temperatura
variable n1 equal (v_temp2-v_temp1)/25

variable lim equal bound(all,xmax)-bound(all,xmin)
variable lx0 = ${lim}

#strainrate1= la convercion de las unidades del strainrate
variable 	strainrate equal 1.0e9
variable 	strainrate1 equal "v_strainrate/1.0e12"



#4 potenciales
#potencial de embedded atom/Finnis-Sinclair para metales
pair_style    eam/fs
#archivo de coeficientes
pair_coeff    * * AuPd.fs Au Pd

#####

velocity all create ${temp1} 12346 mom yes rot yes

variable TEMPE equal "1.0*temp"
variable PEA equal "pe/v_natoms"

fix 2 all ave/time 10 100 1000 v_TEMPE v_PEA file TvsP_avg.dat



print "Compresion a distintas temperaturas"

#CICLO
label loopcompress
variable a loop ${n1}

compute rf all rdf 50
fix 3 all ave/time 10 100 1000 c_rf[*] file radialf${}.rdf mode vector
variable newtemp1 equal (v_a-1)*25+v_temp1

fix compressup all indent 10.0 plane x bound(all,xmin) hi 
compute peratom all pe/atom
dump compressup all custom ${ndump} dump.${newtemp1} id type x y z c_peratom fx fy fz
thermo 100
thermo_style custom step lx ly lz press pxx pyy pzz pe temp

variable strain equal "(lx-v_lx0)/v_lx0"
variable stressf equal "-(0.0001*pxx)*lz*ly"

fix graphss all print 100 "${strain}   ${stressf}" file STRAINvsSTRESS.dat screen no

run 2000



unfix graphss
unfix compressup
undump compressup














